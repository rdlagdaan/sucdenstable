import{j as t,n as m,F as ut}from"./index-C1f3V4tg.js";import{r as s,H as mt,a as pt,N as gt}from"./handsontable-7BBM75Z1.js";import{L as ht,D as bt,y as c,F as xt,a as ft,b as yt}from"./DropdownWithHeaders-Ckr9nb62.js";import"./react-Csw2ODfV.js";function Re({value:S,displayValue:A,readOnlyInput:G,onChange:O,items:R,headers:_,columns:v,search:l,onSearchChange:L,inputClassName:f,dropdownClassName:V,columnWidths:p,placeholder:Y="- -"}){const[b,g]=s.useState(!1),[D,z]=s.useState(""),x=s.useRef(null),M=s.useRef(null),q=s.useRef(null),P=(l??D).trim().toLowerCase(),k=s.useMemo(()=>P?R.filter(n=>v.some(u=>String(n[u]??"").toLowerCase().includes(P))):R,[R,v,P]);s.useEffect(()=>{const n=y=>{const $=x.current;$&&($.contains(y.target)||g(!1))},u=y=>{y.key==="Escape"&&g(!1)};return document.addEventListener("mousedown",n,!0),document.addEventListener("touchstart",n,!0),document.addEventListener("keydown",u,!0),()=>{document.removeEventListener("mousedown",n,!0),document.removeEventListener("touchstart",n,!0),document.removeEventListener("keydown",u,!0)}},[]),s.useEffect(()=>{b&&setTimeout(()=>q.current?.focus(),0)},[b]);const B=()=>setTimeout(()=>{const n=x.current;n&&!n.contains(document.activeElement)&&g(!1)},0);return t.jsxs("div",{className:"relative w-full",ref:x,children:[t.jsx("input",{ref:M,value:A??S??"",onChange:n=>{G||O(n.target.value)},onFocus:()=>g(!0),onClick:()=>g(!0),onKeyDown:n=>{(n.key==="ArrowDown"||n.key==="Enter")&&(g(!0),setTimeout(()=>q.current?.focus(),0),n.preventDefault())},readOnly:!!G,onBlur:B,className:`w-full border rounded px-3 py-2 h-11 text-sm ${f||""}`,placeholder:Y,autoComplete:"off"}),b&&t.jsxs("div",{className:`absolute z-50 mt-1 min-w-full bg-white border rounded shadow ${V||""}`,onMouseDown:n=>{n.target.closest("input")||n.preventDefault()},children:[t.jsx("div",{className:"p-2 border-b sticky top-0 bg-white",children:t.jsx("input",{ref:q,value:l??D,onChange:n=>L?L(n.target.value):z(n.target.value),onBlur:B,onKeyDown:n=>{if(n.key==="Enter"){const u=k[0];u&&(O(String(u.code??u[v[0]])),g(!1))}},className:"w-full border px-2 py-1 rounded text-sm",placeholder:"Search..."})}),t.jsx("div",{className:"grid text-xs font-semibold text-gray-600 px-2 py-2 border-b",style:{gridTemplateColumns:p&&p.length?p.join(" "):`repeat(${_.length}, minmax(0, 1fr))`},children:_.map(n=>t.jsx("div",{className:"truncate pr-2",children:n},n))}),t.jsx("div",{className:"max-h-72 overflow-auto",children:k.length===0?t.jsx("div",{className:"px-3 py-3 text-sm text-gray-500",children:"No results"}):k.map(n=>t.jsx("button",{type:"button",className:"grid w-full text-left px-2 py-1 hover:bg-gray-100 text-sm",style:{gridTemplateColumns:p&&p.length?p.join(" "):`repeat(${_.length}, minmax(0, 1fr))`},onMouseDown:u=>{u.preventDefault(),O(String(n.code??n[v[0]])),g(!1)},children:v.map((u,y)=>t.jsx("div",{className:"truncate pr-2",children:String(n[u]??"")},`${n.code??n[v[0]]}-${y}`))},String(n.code??n[v[0]])))})]})]})}pt.cellTypes.registerCellType("numeric",gt);const W=S=>Number(Math.round((S||0)*100)/100).toLocaleString("en-US",{minimumFractionDigits:2}),E=S=>S?new Date(S).toISOString().slice(0,10):"";function kt(){const S=s.useRef(null),[A,G]=s.useState(!1),[O,R]=s.useState([]),[_,v]=s.useState(""),[l,L]=s.useState(""),[f,V]=s.useState(""),[p,Y]=s.useState(""),[b,g]=s.useState(""),[D,z]=s.useState(""),[x,M]=s.useState(""),[q,P]=s.useState(""),[k,B]=s.useState(""),[n,u]=s.useState(""),[y,$]=s.useState(!1),[J,ae]=s.useState(!1),[Z,se]=s.useState(""),[X,ne]=s.useState(""),[U,De]=s.useState([]),[re,Ie]=s.useState(""),[be,xe]=s.useState([]),[_t,vt]=s.useState(""),[I,oe]=s.useState(0),[K,ie]=s.useState(0),[ce,fe]=s.useState(0),[le,ye]=s.useState(0),[de,_e]=s.useState(0),[T,Q]=s.useState([]),[ue,ee]=s.useState(!1),[Te,Fe]=s.useState(0),[Ee,Ae]=s.useState(0),[Oe,Le]=s.useState(0),[Me,qe]=s.useState(0),[Pe,Be]=s.useState(0),[$e,He]=s.useState(0),We=(...e)=>{const a=e.filter(([,r])=>!r||String(r).trim()==="").map(([r])=>r);return a.length?(c.error(`Please fill: ${a.join(", ")}`),!1):!0},ve="h-8 px-3 py-2.5 text-base leading-6 rounded border border-gray-300",Ve=p?`${p} — ${D||""}`:"",Ye=s.useRef(null),ze=b?`${b} — ${x||""}`:"";s.useEffect(()=>{(async()=>{const{data:e}=await m.get("/api/receiving/rr-list",{params:{include_posted:A?"1":"0",q:_}});R(e||[])})().catch(console.error)},[A,_]),s.useEffect(()=>{(async()=>{const e=await m.get("/api/pbn/list",{params:{q:re}}),a=Array.isArray(e.data)?e.data:Array.isArray(e.data?.data)?e.data.data:[];De(a),console.log("PBN items →",U.length,U[0])})().catch(console.error)},[re]);const Ue=s.useMemo(()=>{const e=_.toLowerCase();return O.filter(a=>(a.receipt_no||"").toLowerCase().includes(e)||(a.pbn_number||"").toLowerCase().includes(e)||(a.vendor_name||"").toLowerCase().includes(e))},[O,_]),Ne=async e=>{g(String(e.row)),M(e.mill||""),oe(Number(e.unit_cost||0)),ie(Number(e.commission||0));try{const{data:a}=await m.get("/api/mills/rate",{params:{mill_name:e.mill,as_of:f||void 0}});fe(Number(a?.insurance_rate||0)),ye(Number(a?.storage_rate||0)),_e(Number(a?.days_free||0))}catch{}},Ke=async e=>{try{L(e);const{data:a}=await m.get("/api/receiving/entry",{params:{receipt_no:e}});if(V(E(a.receipt_date)||""),Y(a.pbn_number||""),g(a.item_number||""),z(a.vendor_name||""),M(a.mill||""),P(a.gl_account_key||""),B(a.assoc_dues??""),u(a.others??""),$(!!a.no_storage),ae(!!a.no_insurance),ne(a.insurance_week?E(a.insurance_week):""),se(a.storage_week?E(a.storage_week):""),a.pbn_number){const[{data:i},{data:d},{data:o}]=await Promise.all([m.get("/api/pbn/items",{params:{pbn_number:a.pbn_number}}),m.get("/api/receiving/pbn-item",{params:{pbn_number:a.pbn_number,item_no:a.item_number}}),m.get("/api/mills/rate",{params:{mill_name:a.mill,as_of:E(a.receipt_date)}})]);xe(Array.isArray(i)?i:[]),oe(Number(d?.unit_cost||0)),ie(Number(d?.commission||0)),fe(Number(o?.insurance_rate||0)),ye(Number(o?.storage_rate||0)),_e(Number(o?.days_free||0))}const{data:r}=await m.get("/api/receiving/details",{params:{receipt_no:e}});Q(Array.isArray(r)?r.map(i=>({...i,persisted:!0})):[]),ee(!0)}catch(a){console.error(a),c.error("Failed to load Receiving Entry.")}},Qe=async e=>{try{Y(e);const a=U.find(d=>d.pbn_number===e);a&&z(a.vendor_name||"");const{data:r}=await m.get("/api/pbn/items",{params:{pbn_number:e}}),i=Array.isArray(r)?r:[];xe(i),i.length===1?await Ne(i[0]):(g(""),M(""),oe(0),ie(0),setTimeout(()=>{Ye.current?.querySelector("input")?.focus()},0))}catch(a){console.error(a),c.error("Failed to load PBN items.")}},Ge=async e=>{const a=typeof e=="string"?be.find(r=>String(r.row)===String(e)):e;if(!a){typeof e=="string"&&g(e);return}await Ne(a)},we=(e,a)=>{const r=(new Date(a).getTime()-new Date(e).getTime())/864e5;return Math.ceil(Math.abs(r)/30)},je=(e,a,r)=>{let i=(new Date(a).getTime()-new Date(e).getTime())/864e5;return i-=r,i<0&&(i=0),Math.floor(i/30)},Je=e=>{let a=0,r=0,i=0,d=0,o=0,N=0;const h=f||"",C=X||"",F=Z||"";e.forEach(w=>{const j=Number(w.quantity||0),te=Number(w.liens||0);a+=j,r+=te;const H=C||(w.week_ending?E(w.week_ending):""),Ce=F||(w.week_ending?E(w.week_ending):"");let pe=0;if(H&&h&&!J){const he=we(H,h);pe=j*(ce||0)*he}let ge=0;if(Ce&&h&&!y){const he=je(Ce,h,de||0);ge=j*(le||0)*he}const dt=j*(I||0)-(K||0);d+=pe,i+=ge,o+=dt,N+=j*(I||0)-pe-ge}),Fe(a),Ae(r),Le(i),qe(d),Be(o),He(N)};s.useEffect(()=>{Je(T)},[T,f,X,Z,J,y,I,K,ce,le,de]);const Se=async(e,a)=>{l&&await m.post("/api/receiving/update-flag",{receipt_no:l,field:e,value:a?1:0})},me=async(e,a)=>{l&&await m.post("/api/receiving/update-date",{receipt_no:l,field:e,value:a||null})},Ze=async e=>{$(e);try{await Se("no_storage",e),c.success("Storage flag updated")}catch{c.error("Failed to update storage flag")}},Xe=async e=>{ae(e);try{await Se("no_insurance",e),c.success("Insurance flag updated")}catch{c.error("Failed to update insurance flag")}},et=async e=>{se(e);try{await me("storage_week",e)}catch{c.error("Failed to update Storage Week")}},tt=async e=>{ne(e);try{await me("insurance_week",e)}catch{c.error("Failed to update Insurance Week")}},at=async e=>{V(e);try{await me("receipt_date",e),c.success("Date Received updated")}catch{c.error("Failed to update Date Received")}},st=async(e,a)=>{if(l)try{const r={receipt_no:l,row_index:a,row:e},{data:i}=await m.post("/api/receiving/batch-insert",r),d=i?.id;if(d){const o=[...T];o[a]={...e,id:d,persisted:!0},Q(o)}}catch(r){console.error(r),c.error("Auto-save failed.")}},nt=async()=>{if(!We(["Date Received",f],["PBN #",p],["Item #",b],["Vendor Name",D],["Mill",x]))return;if(l){c.info("Receiving already created."),ee(!0);return}const a=localStorage.getItem("user"),r=a?JSON.parse(a):null,i=r?.company_id,d=r?.id??r?.user_id;if(!i){c.error("Missing company id; please sign in again.");return}try{const o={company_id:i,user_id:d,pbn_number:p,item_number:b,receipt_date:f,mill:x},{data:N}=await m.post("/api/receiving/create-entry",o),h=N?.receipt_no;if(!h)throw new Error("Server did not return receipt_no");L(h),R(C=>[{receipt_no:h,quantity:0,sugar_type:U.find(F=>F.pbn_number===p)?.sugar_type??"",pbn_number:p,receipt_date:f,vendor_code:"",vendor_name:D||""},...C]);try{const{data:C}=await m.get("/api/receiving/rr-list",{params:{include_posted:A?"1":"0",q:""}});R(C||[])}catch{}ee(!0),c.success(`Created ${h}`)}catch(o){console.error(o),c.error("Failed to create Receiving Entry.")}},ke=s.useRef(null),[rt,ot]=s.useState(520);s.useEffect(()=>{const e=()=>{const a=ke.current?.getBoundingClientRect().top??0,r=Math.max(420,Math.floor(window.innerHeight-a-220));ot(r)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const it=e=>!!(e&&e.quedan_no&&Number(e.quantity||0)>0),ct=()=>({quedan_no:"",quantity:void 0,liens:void 0,week_ending:null,date_issued:null,planter_tin:"",planter_name:"",item_no:b||"",mill:x||"",unit_cost:I||0,commission:K||0,storage:0,insurance:0,total_ap:0}),lt=e=>{const a=[...e];return(a.length===0||it(a[a.length-1]))&&a.push(ct()),a};return s.useEffect(()=>{ue&&T.length===0&&Q(lt(T))},[ue]),t.jsxs("div",{className:"space-y-4 p-6",children:[t.jsx(ht,{position:"top-right",autoClose:2500}),t.jsxs("div",{className:"bg-yellow-50 shadow rounded-lg p-4 border border-yellow-300 space-y-4",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-700",children:"RECEIVING ENTRY"}),t.jsxs("div",{className:"grid grid-cols-12 gap-3 items-end",children:[t.jsxs("div",{className:"col-span-8",children:[t.jsx("label",{className:"block text-sm text-slate-600",children:"Receiving #"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:A,onChange:()=>G(e=>!e),title:"Include posted"}),t.jsx("div",{className:"flex-1",children:t.jsx(bt,{label:"",value:l,onChange:Ke,items:Ue.map(e=>({code:e.receipt_no,label:e.receipt_no,description:e.vendor_name,quantity:e.quantity,pbn_number:e.pbn_number,sugar_type:e.sugar_type,receipt_date:e.receipt_date})),search:_,onSearchChange:v,headers:["Receipt No","Quantity","Sugar Type","PBN No","RDate","Vendor ID","Vendor Name"],columnWidths:["120px","90px","70px","110px","110px","110px","220px"],customKey:"rr",inputClassName:`${ve} bg-green-100 text-green-900`})})]})]}),t.jsxs("div",{className:"col-span-4",children:[t.jsx("label",{className:"block text-sm text-slate-600",children:"Date Received"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"date",value:f,onChange:e=>at(e.target.value),className:"w-full border p-2 rounded bg-yellow-100"}),t.jsx("span",{className:"inline-flex items-center text-xs px-2 rounded border",children:"UD"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-12 gap-3",children:[t.jsxs("div",{className:"col-span-8",children:[t.jsx("label",{className:"block text-sm text-slate-600",children:"PBN #"}),t.jsx(Re,{value:p,displayValue:Ve,readOnlyInput:!0,onChange:Qe,items:U.map(e=>({code:e.pbn_number,pbn_number:e.pbn_number,sugar_type:e.sugar_type,vendor_id:e.vendor_code,vendor_name:e.vendor_name,crop_year:e.crop_year,pbn_date:e.pbn_date})),headers:["PBN #","Sugar Type","Vendor ID","Vendor Name","Crop Year","PBN Date"],columns:["pbn_number","sugar_type","vendor_id","vendor_name","crop_year","pbn_date"],search:re,onSearchChange:Ie,inputClassName:"bg-yellow-100",dropdownClassName:"min-w-[1000px]",columnWidths:["100px","70px","110px","350px","90px","110px"]})]}),t.jsxs("div",{className:"col-span-4",children:[t.jsx("label",{className:"block text-sm text-slate-600",children:"Item #"}),t.jsx(Re,{value:b,displayValue:ze,readOnlyInput:!0,onChange:Ge,items:be.map(e=>({code:String(e.row),item:String(e.row),millmark:e.mill??"",quantity:e.quantity??0,bcost:e.unit_cost??0,ccost:e.commission??0})),headers:["Item","MillMark","Quantity","BCost","CCost"],columns:["item","millmark","quantity","bcost","ccost"],inputClassName:`${ve} bg-yellow-100`,dropdownClassName:"min-w-[980px]",columnWidths:["50px","200px","60px","60px","60px"]})]})]}),t.jsxs("div",{className:"grid grid-cols-12 gap-3",children:[t.jsxs("div",{className:"col-span-8",children:[t.jsx("label",{className:"block text-sm text-slate-600",children:"Vendor Name"}),t.jsx("input",{value:D,disabled:!0,className:"w-full border p-2 bg-yellow-100 rounded"})]}),t.jsxs("div",{className:"col-span-4",children:[t.jsx("label",{className:"block text-sm text-slate-600",children:"Mill"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:x,disabled:!0,className:"w-full border p-2 bg-yellow-100 rounded"}),t.jsx("span",{className:"inline-flex items-center text-xs px-2 rounded border",children:"UM"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Details"}),ue&&t.jsxs("div",{ref:ke,className:"receiving-grid hot-like-pbn",children:[t.jsx("style",{children:`
  .receiving-grid {
    border: 1px solid #cbd5e1;   /* slate-300 */
    border-radius: 6px;
    background: #fff;
    padding: 6px;
    position: relative;
    overflow: visible;           /* don't clip header overlay */
  }

  /* Keep overlays above the scroller */
  .receiving-grid .handsontable .ht_clone_top,
  .receiving-grid .handsontable .ht_clone_left,
  .receiving-grid .handsontable .ht_clone_top_left_corner { z-index: 5000 !important; }
  .receiving-grid .handsontable .ht_clone_top .wtHolder { z-index: 5001 !important; }

  /* ---------- STRICT COMPACT SIZING ---------- */

  /* Base font + cell padding for the whole grid */
  .receiving-grid .handsontable,
  .receiving-grid .handsontable .ht_master,
  .receiving-grid .handsontable .ht_clone_top,
  .receiving-grid .handsontable .ht_clone_left,
  .receiving-grid .handsontable .ht_clone_top_left_corner {
    font-size: 11px;
  }
  .receiving-grid .handsontable td {
    line-height: 18px;
    padding: 0 4px;              /* tight rows */
    border-color: #e5e7eb !important;
    vertical-align: middle;
  }

  /* Header cells — apply to master + all clones */
  .receiving-grid .handsontable thead tr th,
  .receiving-grid .handsontable .ht_clone_top thead tr th,
  .receiving-grid .handsontable .ht_clone_left thead tr th,
  .receiving-grid .handsontable .ht_clone_top_left_corner thead tr th {
    height: 20px !important;     /* <-- header height */
    line-height: 20px !important;
    padding: 0 6px !important;   /* remove extra top/bottom padding */
    white-space: nowrap;
    background: #0b1320 !important;  /* dark header like legacy */
    color: #fff !important;
    font-weight: 600 !important;
    border-color: #1f2937 !important;
  }

  /* Some themes inject inner wrappers; force them down to the same height */
  .receiving-grid .handsontable thead tr th .relative,
  .receiving-grid .handsontable .ht_clone_top thead tr th .relative,
  .receiving-grid .handsontable thead tr th .colHeader {
    height: 20px !important;
    line-height: 20px !important;
  }

  /* Right/center helpers */
  .receiving-grid .handsontable .htRight  { text-align: right; }
  .receiving-grid .handsontable .htCenter { text-align: center; }
`}),t.jsx(mt,{ref:S,data:T,columnHeaderHeight:22,rowHeights:20,colHeaders:["Quedan #","Quantity","Liens","Week Ending","Date Issued","Planter TIN","Planter Name","Item","Mill","Unit Cost","Commission","Storage","Insurance","Total AP"],columns:[{data:"quedan_no",type:"text"},{data:"quantity",type:"numeric",className:"htRight",numericFormat:{pattern:"0,0.00"}},{data:"liens",type:"numeric",className:"htRight",numericFormat:{pattern:"0,0.00"}},{data:"week_ending",type:"date",className:"htCenter",dateFormat:"YYYY-MM-DD",correctFormat:!0},{data:"date_issued",type:"date",className:"htCenter",dateFormat:"YYYY-MM-DD",correctFormat:!0},{data:"planter_tin",type:"text",className:"htCenter"},{data:"planter_name",readOnly:!0},{data:"item_no",readOnly:!0,className:"htCenter"},{data:"mill",readOnly:!0},{data:"unit_cost",type:"numeric",readOnly:!0,className:"htRight",numericFormat:{pattern:"0,0.00"}},{data:"commission",type:"numeric",readOnly:!0,className:"htRight",numericFormat:{pattern:"0,0.00"}},{data:"storage",type:"numeric",readOnly:!0,className:"htRight",numericFormat:{pattern:"0,0.00"}},{data:"insurance",type:"numeric",readOnly:!0,className:"htRight",numericFormat:{pattern:"0,0.00"}},{data:"total_ap",type:"numeric",readOnly:!0,className:"htRight",numericFormat:{pattern:"0,0.00"}}],colWidths:[88,88,96,108,108,116,220,52,136,96,96,96,96,116],preventOverflow:"horizontal",manualColumnResize:!0,stretchH:"all",width:"100%",height:rt,rowHeaders:!0,licenseKey:"non-commercial-and-evaluation",afterChange:(e,a)=>{if(!e||a!=="edit")return;const r=[...T];let i=!1;e.forEach(([d])=>{const o={...r[d]||{}},N=Number(o.quantity||0);o.item_no=b||o.item_no,o.mill=x||o.mill,o.unit_cost=I||0,o.commission=K||0;const h=f||"",C=o.week_ending?E(o.week_ending):"";let F=0;const w=X||C;if(w&&h&&!J){const H=we(w,h);F=N*(ce||0)*H}let j=0;const te=Z||C;if(te&&h&&!y){const H=je(te,h,de||0);j=N*(le||0)*H}o.storage=j,o.insurance=F,o.total_ap=N*(I||0)-j-F,r[d]=o,o.quedan_no&&N>0&&(setTimeout(()=>st(o,d),0),d===r.length-1&&(i=!0))}),i&&r.push({quedan_no:"",quantity:void 0,liens:void 0,week_ending:null,date_issued:null,planter_tin:"",planter_name:"",item_no:b||"",mill:x||"",unit_cost:I||0,commission:K||0,storage:0,insurance:0,total_ap:0}),Q(r)}})]})]}),t.jsxs("div",{className:"mt-4 border border-slate-300 rounded-lg bg-white shadow-sm p-4 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-slate-800",children:[t.jsxs("div",{children:[" Total Quantity__ ",t.jsx("span",{className:"font-semibold",children:W(Te)})," "]}),t.jsxs("div",{children:[" Total Insurance_ ",t.jsx("span",{className:"font-semibold",children:W(Me)})," "]}),t.jsxs("div",{children:[" Total Cost_____ ",t.jsx("span",{className:"font-semibold",children:W(Pe)})," "]}),t.jsxs("div",{children:[" Total Liens____ ",t.jsx("span",{className:"font-semibold",children:W(Ee)})," "]}),t.jsxs("div",{children:[" Total Storage__ ",t.jsx("span",{className:"font-semibold",children:W(Oe)})," "]}),t.jsxs("div",{children:["Total AP Cost___"," ",t.jsx("span",{className:"font-semibold",children:W($e+Number(k||0)+Number(n||0))})]})]}),t.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[t.jsxs("div",{className:"col-span-6 grid grid-cols-6 gap-4",children:[t.jsxs("div",{className:"col-span-6",children:[t.jsx("label",{className:"block text-xs font-semibold text-slate-600",children:"GL Account"}),t.jsx("input",{value:q,onChange:e=>P(e.target.value),onBlur:async()=>{if(l)try{await m.post("/api/receiving/update-gl",{receipt_no:l,gl_account_key:q}),c.success("GL Account updated")}catch{c.error("Failed to update GL Account")}},className:"w-full border p-2 rounded bg-yellow-50"})]}),t.jsxs("div",{className:"col-span-3",children:[t.jsx("label",{className:"block text-xs font-semibold text-slate-600",children:"Assoc Dues"}),t.jsx("input",{type:"number",step:"0.01",value:k,onChange:e=>B(e.target.value===""?"":Number(e.target.value)),onBlur:async()=>{if(l)try{await m.post("/api/receiving/update-assoc-others",{receipt_no:l,assoc_dues:Number(k||0),others:Number(n||0)}),c.success("Assoc/Others saved")}catch{c.error("Failed to save Assoc/Others")}},className:"w-full border p-2 rounded bg-yellow-50"})]}),t.jsxs("div",{className:"col-span-3",children:[t.jsx("label",{className:"block text-xs font-semibold text-slate-600",children:"Others"}),t.jsx("input",{type:"number",step:"0.01",value:n,onChange:e=>u(e.target.value===""?"":Number(e.target.value)),onBlur:async()=>{if(l)try{await m.post("/api/receiving/update-assoc-others",{receipt_no:l,assoc_dues:Number(k||0),others:Number(n||0)}),c.success("Assoc/Others saved")}catch{c.error("Failed to save Assoc/Others")}},className:"w-full border p-2 rounded bg-yellow-50"})]})]}),t.jsxs("div",{className:"col-span-6 grid grid-cols-6 gap-4",children:[t.jsxs("div",{className:"col-span-3",children:[t.jsx("label",{className:"block text-xs font-semibold text-slate-600",children:"Storage Week"}),t.jsx("input",{type:"date",value:Z,onChange:e=>et(e.target.value),className:"w-full border p-2 rounded bg-white"})]}),t.jsxs("div",{className:"col-span-3",children:[t.jsx("label",{className:"block text-xs font-semibold text-slate-600",children:"Insurance Week"}),t.jsx("input",{type:"date",value:X,onChange:e=>tt(e.target.value),className:"w-full border p-2 rounded bg-white"})]}),t.jsxs("div",{className:"col-span-6 flex items-center gap-8 pt-1",children:[t.jsxs("label",{className:"inline-flex items-center gap-2 text-slate-700",children:[t.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-blue-600",checked:y,onChange:e=>Ze(e.target.checked)}),t.jsx("span",{className:"text-sm font-medium",children:"No Storage"})]}),t.jsxs("label",{className:"inline-flex items-center gap-2 text-slate-700",children:[t.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-blue-600",checked:J,onChange:e=>Xe(e.target.checked)}),t.jsx("span",{className:"text-sm font-medium",children:"No Insurance"})]})]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{className:"inline-flex items-center gap-2 rounded border px-3 py-2 bg-white",children:[t.jsx(xt,{className:"h-5 w-5"}),t.jsx("span",{children:"Print"}),t.jsx(ut,{className:"h-4 w-4"})]}),t.jsxs("button",{className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>{L(""),ee(!1),Q([]),V(""),Y(""),g(""),z(""),M(""),B(""),u(""),ae(!1),$(!1),ne(""),se(""),c.success("Ready for new Receiving Entry")},children:[t.jsx(ft,{className:"h-5 w-5"}),"New"]}),t.jsxs("button",{disabled:!!l,className:`inline-flex items-center gap-2 px-4 py-2 rounded 
                      ${l?"bg-green-400 cursor-not-allowed opacity-60":"bg-green-600 hover:bg-green-700"} 
                      text-white`,onClick:nt,children:[t.jsx(yt,{className:"h-5 w-5"}),"Save"]})]})]})}export{kt as default};
